<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#0ea5e9" />
    <meta name="description" content="Изучайте испанский язык интерактивно с PairLingua" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://pairlingua.com/" />
    <meta property="og:title" content="PairLingua - Изучение испанского языка" />
    <meta property="og:description" content="Интерактивное изучение испанского языка с алгоритмом spaced repetition" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:title" content="PairLingua - Изучение испанского языка" />
    <meta property="twitter:description" content="Интерактивное изучение испанского языка с алгоритмом spaced repetition" />
    
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <title>PairLingua - Изучение испанского языка</title>
    
    <!-- Prevent FOUC (Flash of Unstyled Content) -->
    <style>
      body {
        visibility: hidden;
        opacity: 0;
        transition: opacity 0.3s;
      }
      .app-loaded {
        visibility: visible !important;
        opacity: 1 !important;
      }
    </style>
  </head>
  <body class="bg-gray-50 font-sans">
    <noscript>
      <div style="text-align: center; padding: 2rem; font-family: system-ui;">
        <h1>JavaScript Required</h1>
        <p>PairLingua requires JavaScript to function properly.</p>
        <p>Please enable JavaScript in your browser settings.</p>
      </div>
    </noscript>
    
    <!-- Loading spinner -->
    <div id="initial-loader" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
      <div class="text-center">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div>
        <p class="mt-4 text-gray-600">Загрузка PairLingua...</p>
      </div>
    </div>
    
    <div id="root"></div>
    
    <!-- PWA Installation Prompt -->
    <div id="pwa-install-prompt" class="hidden fixed bottom-4 left-4 right-4 bg-primary-600 text-white p-4 rounded-lg shadow-lg z-40">
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <svg class="h-6 w-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
          </svg>
          <span class="text-sm font-medium">Установить PairLingua на устройство</span>
        </div>
        <div class="flex space-x-2">
          <button id="pwa-install-btn" class="bg-white text-primary-600 px-3 py-1 rounded text-sm font-medium">
            Установить
          </button>
          <button id="pwa-dismiss-btn" class="text-primary-200 hover:text-white">
            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
    
    <script>
      // Remove loading spinner when page loads
      window.addEventListener('load', function() {
        document.body.classList.add('app-loaded');
        const loader = document.getElementById('initial-loader');
        if (loader) {
          loader.style.display = 'none';
        }
      });
      
      // PWA Installation
      let deferredPrompt;
      
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        
        const installPrompt = document.getElementById('pwa-install-prompt');
        const installBtn = document.getElementById('pwa-install-btn');
        const dismissBtn = document.getElementById('pwa-dismiss-btn');
        
        if (!localStorage.getItem('pwa-dismissed')) {
          installPrompt.classList.remove('hidden');
        }
        
        installBtn.addEventListener('click', () => {
          installPrompt.classList.add('hidden');
          deferredPrompt.prompt();
          deferredPrompt.userChoice.then((choiceResult) => {
            deferredPrompt = null;
          });
        });
        
        dismissBtn.addEventListener('click', () => {
          installPrompt.classList.add('hidden');
          localStorage.setItem('pwa-dismissed', 'true');
        });
      });
    </script>
  </body>
</html>
